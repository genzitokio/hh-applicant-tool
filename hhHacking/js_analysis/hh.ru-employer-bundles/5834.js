try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="27471356-3e59-48eb-a887-d6ca95cb829c",e._sentryDebugIdIdentifier="sentry-dbid-27471356-3e59-48eb-a887-d6ca95cb829c")}()}catch(e){}!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:sentry-js-hh-filter-key":!0})}catch(e){}}(),function(){try{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"a8891b807f20bd18b60ec88985b3712ef8d8e4c6"}}catch(e){}}(),(globalThis.__xhh_LOADABLE_LOADED_CHUNKS__=globalThis.__xhh_LOADABLE_LOADED_CHUNKS__||[]).push([["5834"],{51311:function(e,t,n){n.r(t),n.d(t,{default:()=>i});var o=n(487001);n(370120);o.Z.initializeApp({messagingSenderId:window.globalVars.firebaseMessagingSenderId,projectId:window.globalVars.firebaseProjectId,apiKey:window.globalVars.firebaseApiKey,appId:window.globalVars.firebaseAppId});const i=o.Z},246251:function(e,t,n){n.r(t),n.d(t,{default:()=>o});const o=n(741095).default.build({defaults:{cssClasses:{hidden:"g-hidden"}},create:(e,{actions:t,cssClasses:n})=>{const o=()=>{e.classList.add(n.hidden)};return{hide:o,waitForUsersAction:()=>new Promise((i=>{e.addEventListener("click",(function n(a){const r=t.find((({target:e})=>e.contains(a.target)));r&&(a.preventDefault(),e.removeEventListener("click",n),o(),i(r.result))})),e.classList.remove(n.hidden)}))}},componentName:"HH/WebPush/HTMLConfirm"})},755866:function(e,t,n){n.r(t),n.d(t,{default:()=>u});var o=n(630549),i=n(388926),a=n(51311),r=n(247424),s=n(741095),d=n(246251);const c="web_push_confirm_reason",l=[2,4,7],f=e=>r.default.postFormData("/push_subscribe",{token:e}).catch(console.error),u=s.default.build({create:async e=>{if(!a.default.messaging.isSupported())return;const t=a.default.messaging();t.onMessage((({data:e})=>{if("visible"!==document.visibilityState)return;const t=((e,{apiHost:t})=>(e.params=JSON.parse(e.params),e.onOpenActions=JSON.parse(e.onOpenActions).filter((({type:e})=>"apiGetRequest"===e)).map((e=>({...e,url:`${t}${e.url}`}))),e))(e,{apiHost:window.globalVars.apiHost});if("openLink"!==t.params.action)return;const n=new Notification(t.title||"",{body:t.alert,data:t});n.onclick=e=>{const{params:o,onOpenActions:i}=t;e.preventDefault(),n.close(),(e=>{const t=window.open(e);if(t)try{t.opener=null}catch(e){}})(o.linkUrl),i.forEach((({url:e})=>fetch(e,{mode:"no-cors"})))}}));const n=(()=>{try{return JSON.parse(o.Y.getItem("HH-WebPushSubscribe"))||{}}catch(e){return{}}})(),r=()=>{const e=n.totalAttempts||0;var t;n.totalAttempts=e+1,n.nextConfirmAttemptTime=(t=e,Date.now()+864e5*l[Math.min(t,l.length-1)]),o.Y.setItem("HH-WebPushSubscribe",JSON.stringify(n))};if("granted"===Notification.permission)try{const e=await t.getToken();e&&f(e)}catch(e){console.error(e)}if("denied"===Notification.permission&&i.L.remove(c),"default"===Notification.permission){if(!i.L.get(c))return;if(!(()=>{try{const{nextConfirmAttemptTime:e}=n;return!e||e<=Date.now()}catch(e){return!0}})())return void i.L.remove(c);const o=s.default.make(d.default,e,{actions:[{target:e.querySelector(".HH-WebPush-Hide"),result:"cancel"},{target:e.querySelector(".HH-WebPush-Accept"),result:"confirm"}]});try{if("confirm"===await o.waitForUsersAction()){if("granted"===await Notification.requestPermission()){const e=await t.getToken();f(e)}}else r();i.L.remove(c)}catch(e){console.error(e)}}},componentName:"HH/WebPush/Subscribe"})}}]);
//# sourceMappingURL=5834.ecaadf3edf39b731.js.map
//# debugId=27471356-3e59-48eb-a887-d6ca95cb829c